(function(){"use strict";var t={3773:function(t,e,n){var s=n(9242),o=n(3396),i=n(7718),a=n(3369),r=n(3140);function l(t,e,n,s,l,d){const c=(0,o.up)("navbar"),u=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(i.q,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c),(0,o.Wm)(r.O,{class:"d-flex align-start justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(a.K,{class:"d-flex align-start justify-center h-100 m-0"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((({Component:t})=>[((0,o.wg)(),(0,o.j4)(o.Ob,null,[((0,o.wg)(),(0,o.j4)((0,o.LL)(t)))],1024))])),_:1})])),_:1})])),_:1})])),_:1})}n(7658);var d=n(8796),c=n(5101);function u(t,e,n,s,i,a){return(0,o.wg)(),(0,o.j4)(d.L,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c.T,{rounded:"",onClick:e[0]||(e[0]=e=>t.$router.push("/book"))},{default:(0,o.w5)((()=>[(0,o.Uk)("Book")])),_:1}),(0,o.Wm)(c.T,{rounded:"",onClick:e[1]||(e[1]=e=>t.$router.push("/info"))},{default:(0,o.w5)((()=>[(0,o.Uk)("Difference")])),_:1})])),_:1})}var h={},f=n(89);const p=(0,f.Z)(h,[["render",u]]);var m=p,b={components:{Navbar:m}};const g=(0,f.Z)(b,[["render",l]]);var v=g,w=n(2483),y=n(7139),_=n(240);function k(t,e,n,s,i,r){const l=(0,o.up)("Loader"),d=(0,o.up)("data-table");return i.isDepthLoading?((0,o.wg)(),(0,o.j4)(l,{key:0})):((0,o.wg)(),(0,o.j4)(a.K,{key:1,class:"book-view d-flex flex-column align-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(_.r,{eager:"","onUpdate:modelValue":r.scrollPositionHandler,class:"book-view__drop-down",density:"compact",items:i.items,placeholder:"table"},null,8,["onUpdate:modelValue","items"]),(0,o._)("div",null,(0,y.zw)(i.symbol),1),(0,o.Wm)(a.K,{class:"book-view__table d-flex flex-wrap align-start justify-center m-0 p-0"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{headers:i.headers,data:i.depth.asks,id:"asks",title:"Asks"},null,8,["headers","data"]),(0,o.Wm)(d,{headers:i.headers,data:i.depth.bids,id:"bids",title:"Bids"},null,8,["headers","data"])])),_:1})])),_:1}))}n(541);var D=n(4413);const j=["colspan"],x={class:"bg-blue"},O={class:"text-left"},B={class:"text-left"},S={class:"text-left"};function U(t,e,n,s,i,a){return(0,o.wg)(),(0,o.j4)(D.Y,{class:"data-table m-0 mb-10","fixed-header":"",theme:"light"},{default:(0,o.w5)((()=>[(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{colspan:n.headers.length,class:"text-white text-center text-uppercase bg-blue-lighten-2"},(0,y.zw)(n.title),9,j)]),(0,o._)("tr",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.headers,(t=>((0,o.wg)(),(0,o.iD)("th",x,(0,y.zw)(t.text),1)))),256))])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.data,(t=>((0,o.wg)(),(0,o.iD)("tr",null,[(0,o._)("td",O,(0,y.zw)(parseFloat(t[0])),1),(0,o._)("td",B,(0,y.zw)(parseFloat(t[1])),1),(0,o._)("td",S,(0,y.zw)(parseFloat(t[0])*parseFloat(t[1])),1)])))),256))])])),_:1})}var L={name:"data-table",props:{title:String,headers:Array,data:Array,colspan:Number}};const T=(0,f.Z)(L,[["render",U]]);var C=T;const I={class:"loader align-self-center m-auto"};function W(t,e){return(0,o.wg)(),(0,o.iD)("div",I)}const $={},P=(0,f.Z)($,[["render",W],["__scopeId","data-v-7b8982c4"]]);var Z=P,K={components:{DataTable:C,Loader:Z},data(){return{scrollPosition:0,headers:[{text:"Price",value:"price"},{text:"Quantity",value:"quantity"},{text:"Amount",value:"amount"}],items:["asks","bids"],connection:null,depth:{},limit:500,isDepthLoading:!1,symbol:"BTCUSDT"}},created(){this.connection||(this.fetchDepth(this.symbol,this.limit),this.subscribe(this.symbol)),this.eventBus.on("symbol-selected",(t=>{this.symbol=t,this.depth=this.fetchDepth(t,this.limit),this.connection.close(),this.subscribe(t)}))},methods:{scrollPositionHandler(t){document.getElementById(t).scrollIntoView({behavior:"smooth"})},async fetchDepth(t,e){this.isDepthLoading=!0,this.depth=await this.sdk.getDepth(t,e),this.isDepthLoading=!1},subscribe(t){let e;this.connection=this.sdk.wsSubscribe(t),this.connection.onmessage=t=>{const n=JSON.parse(t.data),{e:s,E:o,s:i,a:a,b:r,u:l,U:d}=n,c=a.filter((t=>0!=t[1])),u=r.filter((t=>0!=t[1]));e=this.depth.lastUpdateId,this.eventBus.emit("diff-changes",`Symbol: ${i}\n                                    Event type: ${s}\n                                    Event time: ${o}\n                                    First update ID in event: ${d}\n                                    Final update ID in event: ${l}\n                                    Bids to be updated:\n ${JSON.stringify(u)}\n                                    Asks to be updated:\n ${JSON.stringify(c)}`),l<=e?(this.depth.asks.splice(this.depth.lastUpdateId-l,c.length,...c),this.depth.bids.splice(this.depth.lastUpdateId-l,u.length,...u)):d<=e+1&&l>=e+1||d==e+1?(this.updateDepth(c,u),this.depth.lastUpdateId=l):d>=e+1&&(this.depth.lastUpdateId++,this.updateDepth(c,u))},this.connection.onclose=t=>{t.wasClean?console.log(`[close] Соединение закрыто чисто, код=${t.code}`):console.log("[close] Соединение прервано")},this.connection.onerror=t=>{console.log(t)}},updateDepth(t,e){t.length>0&&e.length>0&&(this.depth.asks.unshift(...t),this.depth.asks.splice(-t.length),this.depth.bids.unshift(...e),this.depth.bids.splice(-e.length))}}};const z=(0,f.Z)(K,[["render",k],["__scopeId","data-v-f6722202"]]);var A=z;function F(t,e,n,s,i,r){const l=(0,o.up)("Loader"),d=(0,o.up)("List");return(0,o.wg)(),(0,o.j4)(a.K,{class:"diff-info d-flex flex-column align-center justify-start",height:"100vh"},{default:(0,o.w5)((()=>[(0,o.Wm)(_.r,{"onUpdate:modelValue":r.onChange,class:"diff-info__drop-down",items:i.symbols,density:"compact"},null,8,["onUpdate:modelValue","items"]),0==i.diffs.length?((0,o.wg)(),(0,o.j4)(a.K,{key:0,class:"d-flex justify-center align-center h-100"},{default:(0,o.w5)((()=>[(0,o.Wm)(l)])),_:1})):((0,o.wg)(),(0,o.j4)(d,{key:1,class:"diff-info__list",items:i.diffs},null,8,["items"]))])),_:1})}var E=n(8275),H=n(3150);function N(t,e,n,s,i,a){return(0,o.wg)(),(0,o.j4)(E.i,{class:"custom-scroll"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.items,(t=>((0,o.wg)(),(0,o.j4)(H.l,{border:"",class:"text-start mb-3"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,y.zw)(t),1)])),_:2},1024)))),256))])),_:1})}var M={props:{items:Array}};const V=(0,f.Z)(M,[["render",N],["__scopeId","data-v-4db0f265"]]);var Y=V,J={components:{List:Y,Loader:Z},data(){return{symbols:["BTCUSDT","BNBBTC","ETHBTC"],diffs:[]}},mounted(){this.eventBus.on("diff-changes",(t=>{this.diffs.unshift(t),this.diffs.length>50&&this.diffs.pop()})),this.eventBus.on("symbol-selected",(()=>this.diffs=[]))},methods:{onChange(t){this.eventBus.emit("symbol-selected",t)}}};const q=(0,f.Z)(J,[["render",F],["__scopeId","data-v-2c4a11d3"]]);var Q=q;function R(t,e,n,s,i,a){return(0,o.wg)(),(0,o.iD)("div",null,' SPA app "Depth of Market" ')}var G={};const X=(0,f.Z)(G,[["render",R]]);var tt=X;const et=[{path:"/",component:tt,name:"Main"},{path:"/book",component:A},{path:"/info",component:Q}],nt=(0,w.p7)({history:(0,w.PO)("/depth-of-market/"),base:"/depth-of-market/",routes:et});var st=nt,ot=n(1373);const it=(0,ot.Z)();var at=n(4311);const rt={getDepth:async(t,e=500)=>(await at.Z.get(`https://api.binance.com/api/v3/depth?symbol=${t}&limit=${e}`)).data,wsSubscribe:t=>new WebSocket(`wss://stream.binance.com:9443/ws/${t.toLowerCase()}@depth`)};var lt={install:t=>{t.config.globalProperties.eventBus=it,t.config.globalProperties.sdk=rt}},dt=(n(9773),n(8957)),ct=n(3455),ut=n(8600);const ht=(0,dt.Rd)({components:ct,directives:ut});(0,s.ri)(v).use(st).use(ht).use(lt).mount("#app")}},e={};function n(s){var o=e[s];if(void 0!==o)return o.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,s,o,i){if(!s){var a=1/0;for(c=0;c<t.length;c++){s=t[c][0],o=t[c][1],i=t[c][2];for(var r=!0,l=0;l<s.length;l++)(!1&i||a>=i)&&Object.keys(n.O).every((function(t){return n.O[t](s[l])}))?s.splice(l--,1):(r=!1,i<a&&(a=i));if(r){t.splice(c--,1);var d=o();void 0!==d&&(e=d)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[s,o,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,i,a=s[0],r=s[1],l=s[2],d=0;if(a.some((function(e){return 0!==t[e]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(l)var c=l(n)}for(e&&e(s);d<a.length;d++)i=a[d],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(c)},s=self["webpackChunkvue_ws"]=self["webpackChunkvue_ws"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(3773)}));s=n.O(s)})();
//# sourceMappingURL=app.68a87ab7.js.map